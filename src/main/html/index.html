<html>

<body>

<div>

<script>
var contentStd ={
 tasks:[],
 };
 </script>

<input type="text" id="taskName" onchange="console.log('a');" value="crear tarea"/>
<input type="text" id="taskDate" value="22/10" />

<input type="button" id="removedAll" name="removedAll" value="clear tasks NOT WORKING"/>
<!-- <input type="button" onclick="sessionStorage.clear();;" value="Clear all sessionStorage"/> -->
<input type="button" onclick="javascript:console.log(viewModel.tasks());" value="View tasks in console.log"/>



<script type="text/javascript" src="http://knockoutjs.com/downloads/knockout-3.0.0.js"></script>
<script type="text/javascript" src="http://knockoutjs.com/js/cufon-yui.js"></script>
<script type="text/javascript" src="http://knockoutjs.com/js/titilliummaps.font.js"></script>
<script type="text/javascript" src="http://knockoutjs.com/js/json2.js"></script>

<script type="text/javascript" src="http://knockoutjs.com/js/syntaxhighlighter_3.0.83/scripts/shCore.js"></script> 
<script type="text/javascript" src="http://knockoutjs.com/js/syntaxhighlighter_3.0.83/scripts/shBrushJScript.js"></script> 
<script type="text/javascript" src="http://knockoutjs.com/js/syntaxhighlighter_3.0.83/scripts/shBrushXml.js"></script> 

<script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
<script src="https://jquery-json.googlecode.com/files/jquery.json-2.4.js"></script>
<script src="../../../lib/modernizr/modernizr.js"></script>
<script src="../js/common-functions.js"></script>
<script src="../js/App.js"></script>


<script>
/*
var app = new App();
app.retrieveFromStorage();
*/

var viewModel;
$(document).ready(function(){

$('#taskName').keypress(function(e){
	if(isEnter(e,true)){
		viewModel.add();
	}
});
/*
$('#taskDate').keypress(function(e){
	if(isEnter(e,true)){
		addNewTask();
	}
});
*/




/*
updateView();

function updateView(){
	$.templates("#taskTemplate").link("#result", app)
		.on("click", ".remove", function() {
			var view = $.view(this);
			console.log(app);
			console.log(view.index);
			$.observable(app.tasks).remove(view.index);
			app.persist();
		})
		  .on("click", "#add", function() {
		  	console.log(app.tasks);
		  	console.log($.observable(app.tasks));

			var task=new Object();
			task.name=$('#taskName').val();
			task.deadline=$('#taskDate').val();
			$.observable(app.tasks).insert(app.tasks.length, task);
			app.persist();
		  })
		.on("click", "#removeAll", function() {
			console.log($.observable(app.tasks));
			

			var initialLength=app.tasks.length;
			for(var i=0;i<initialLength;i++){
				$.observable(app.tasks).remove(0);
			}

			app.persist();

		  });
}
*/
});

</script>

<img class="remove" src="http://www.jsviews.com/resources/images/close.png" />
<div class='liveExample'> 
    
    <form >
        <p>You have asked for <span data-bind='text: tasks().length'>&nbsp;</span> task(s)</p>
        <p>You have asked for <span data-bind='text: $.toJSON(tasks())'>&nbsp;</span> task(s)</p>
        <table >
            <thead>
                <tr>
                    <th>task name</th>
                    <th>deadline</th>
                    <th />
                </tr>
            </thead>
            <tbody data-bind='foreach: tasks'>
                <tr>
                    <td><input class='required' data-bind='value: name' /></td>
                    <td><input class='required number' data-bind='value: deadline' /></td>
                    <td><a href='#' data-bind='click: $root.removetask'>Delete</a></td>
                </tr>
            </tbody>
        </table>
     
        <button data-bind='click: add({"name":"a","deadline":"b"})'>Add task</button>
        <button data-bind='enable: tasks().length > 0' type='submit'>Submit</button>
    </form>
    
</div>

<script type="text/javascript">

$(document).ready(function(){


 viewModel = new App();
ko.applyBindings(viewModel);
});

</script>

</body>
</html>

