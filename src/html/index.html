<html>

<head>

</head>

<body>

<div>

<input type="text" id="taskName" onchange="console.log('a');" value="crear tarea"/>
<input type="text" id="taskDate" value="22/10" />

<input type="button" onclick="sessionStorage.setItem('tasks',undefined);" value="clear tasks"/>
<input type="button" onclick="sessionStorage.clear();" value="Clear all sessionStorage"/>
<input type="button" onclick="javascript:console.log(tasks);" value="View tasks in console.log"/>
</div>

<script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
<script src="https://jquery-json.googlecode.com/files/jquery.json-2.4.js"></script>
<script src="../js/modernizr.js"></script>
<script src="../js/common-functions.js"></script>


<link href="http://www.jsviews.com/samples/samples.css" rel="stylesheet"/>
<script src="http://www.jsviews.com/download/jsviews.js"></script>

<script>
var tasks;
$(document).ready(function(){
var tasksString = sessionStorage.getItem('tasks');
tasks = 'undefined' == tasksString || null == tasksString? []:$.parseJSON(tasksString);

if (Modernizr.localstorage) {
	console.log("localstorage is available");
} else {
  console.log("localstorage is NOT ------------available");
}

function addNewTask(){
	var name = $('#taskName').val();
	var date = $('#taskDate').val();
	var task=new Object();
	task.name=name;
	task.deadline=date;
	console.log($.toJSON(task));
	tasks.push(task);
	
	sessionStorage.setItem('tasks',$.toJSON(tasks));
}

$('#taskName').keypress(function(e){
	if(isEnter(e,true)){
		addNewTask();
	}
});
$('#taskDate').keypress(function(e){
	if(isEnter(e,true)){
		addNewTask();
	}
});
});
</script>

<div id="result"></div>

<script id="theTmpl" type="text/x-jsrender">
<div>
  Edit: <input type="checkbox" data-link="editable"/>
  <em>Name:</em> {^{:name}}}
  {^{if showNickname && nickname}}
    (Goes by <em data-link="nickname"></em>)
  {{/if}}
  {^{if editable}}
    <div>
      <input data-link="name"/>
      <input data-link="nickname"/>
      <input type="checkbox" data-link="showNickname"/>
    </div>
  {{/if}}
</div>

</script>

<script>
var data = [
  {
    "name": "Robert",
    "nickname": "Bob",
    "showNickname": true
  },
  {
    "name": "Susan",
    "nickname": "Sue",
    "showNickname": false
  }
];

var template = $.templates("#theTmpl");

template.link("#result", data);
</script>

</body>
</html>

